{% extends 'community/layout.html' %}
{% block ContentView %}
    <br><br><br><br>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header border-0 bg-white d-flex">
                        <div class="col-11">
                            <h2>{{ title }}</h2>
                            <p>{{ author }}</p>
                        </div>
                        <div class="col">
                            <div class="dropdown align-self-center">
                                <div role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-cog flex-shrink-1 align-self-center"></i>
                                </div>
                                <div class="dropdown-menu dropdown-menu-right shadow" aria-labelledby="dropdownMenuLink" style="border-radius:1rem;">
                                    {% if editable %}
                                        <div class="dropdown-header">Settings: </div>
                                        <a class="dropdown-item" href="{{ edit_url }}"><i class="fas fa-edit"></i>Edit Thread</a>
                                        <a class="dropdown-item text-danger" href="#"><i class="fas fa-trash"></i>Delete Thread</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>{{ content }}</p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header border-0 bg-white" style="border-radius:2rem;">
                        <h4>Comments</h4>
                    </div>
                    <div class="card-body">
                        {% for comment in comments %}
                        <p><strong>{{comment.author}}</strong> - {{comment.description}}</p>
                        {% endfor %}
                        <br>
                        {% if not closed %}
                            <form method="POST" enctype="multipart/form-data" action="#formscroll">
                                {% csrf_token %}
                                {{ form.as_p }}
                                <button class="btn btn-light" type="submit" style="width:100%;border-radius:1rem;background-color:#91eef5" id="formscroll">Submit</button>
                            </form>
                        {% else %}
                            <h5>Thread Closed</h5>
                        {% endif %}
                    </div>
                </div>
            </div>
            <br>
            <div class="col">
                <div class="card">
                    <div class="card-header border-0 bg-white" style="border-radius:2rem;">
                        <h4>Similar Threads You might like</h4>
                    </div>
                    <div class="card-body">
                        Links to similar thread comes here
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        if ( window.history.replaceState ) {
          window.history.replaceState( null, null, window.location.href );
        }
    </script>
{% endblock %}